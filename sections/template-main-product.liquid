<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
/>
{{ 'application.css' | asset_url | stylesheet_tag }}
{{ 'home-hero.css' | asset_url | stylesheet_tag }}
{{ 'template-product.css' | asset_url | stylesheet_tag }}

<div class="section product-single">
  <div class="container product-single-cont">
    <div class="product-gallery">
      <div
        style="--swiper-navigation-color: #fff; --swiper-pagination-color: #fff"
        class="swiper product-gallery-main"
      >
        <div class="swiper-wrapper product-gallery-wrapper">
          {% for media in product.media %}
            <div class="swiper-slide product-thumbs-slide">
              {% if media.media_type == 'video' %}
                {{ media | video_tag: image_size: 480, controls: true, class: 'product-media-video' }}
              {% endif %}
              {% if media.media_type == 'image' %}
                <img src="{{ media | image_url }}" alt="" class="product-media-image">
              {% endif %}
            </div>
          {% endfor %}
        </div>
      </div>
      <div thumbsSlider="" class="swiper product-gallery-thumbs">
        <div class="swiper-wrapper">
          {% for media in product.media %}
            <div class="swiper-slide product-main-slide">
              {% if media.media_type == 'video' %}
                {{ media | video_tag: image_size: 480, class: 'product-media-video' }}
              {% endif %}
              {% if media.media_type == 'image' %}
                <img src="{{ media | image_url }}" alt="" class="product-media-image">
              {% endif %}
            </div>
          {% endfor %}
        </div> 
      </div>
    </div>
    <div class="product-single-info">
      <span class="txt-500">Backsync</span>
      <h2 class="product-single-title">{{ product.title }}</h2>
      {% for block in section.blocks %}

        {% if block.type = '@app' %}
          <div class="review-wrapper">
            {{ block.settings.content }}
          </div>
        {% endif %}
        
      {% endfor %}
      
      <div class="product-single-price-wrapper">
        <span class="txt-product-price" class="product-price">{{ product.price | money }}</span>
        <span class="txt-product-price-compare" class="product-price">{{ product.compare_at_price_max | money }}</span>
      </div>
      <span>Variant: Black</span>
      <div class="product-action-wrapper">
        <form id="product-form-{{ product.id }}" action="/cart/add" method="post" enctype="multipart/form-data" class="product-action-form">
          <input type="hidden" name="id" value="{{ product.variants.first.id }}" />
          
          <div class="product-quantity-wrapper">

            <!-- Quantity Selector -->
            <label for="quantity">Quantity:</label>
            <div class="product-quantity">
              <div class="quantity-selector">
                <button type="button" id="decrement-btn">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M4.16602 10H15.8327" stroke="#C2C2C2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <input type="number" id="quantity-input" name="quantity" value="1" min="1" max="{{ product.variants.first.inventory_quantity }}" />
                <button type="button" id="increment-btn">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9.99935 4.16699V15.8337M4.16602 10.0003H15.8327" stroke="#C2C2C2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
            </div>

            <!-- Stock Amount Display -->
            <p id="stock-amount">Stock: {{ product.variants.first.inventory_quantity }}</p>
            </div>

          </div>

          <div class="product-bottom-wrapper">
            <div class="product-subtotal-wrapper">
              <p>Subtotal:</p>
              {% assign price_with_currency = product.price | money %}
              {% assign price_without_currency = product.price | money_without_currency %}
              {% assign currency_symbol = price_with_currency | remove: price_without_currency %}

              <p>{{ currency_symbol }}<span id="subtotal" class="product-price">{{ product.price | money_without_currency }}</span></p>
            </div>
            <!-- Subtotal Display -->
            

            <div class="product-btn-wrapper">
               <!-- Add to Cart Button -->
              <button type="submit" class="btn add-to-cart btn-primary btn-dark uppercase txt-center {% unless product.variants.first.inventory_quantity > 0 %} disabled {% endunless %}%}">Add to Cart</button>
              <!-- Buy with Shop Pay Button -->
              <div class="shop-pay-button">
                  {{ form | shopify_payment_button }}
              </div>
            </div>

            <div class="product-warranty-wrapper">
              <div class="product-warranty-item">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M16.25 3.125H3.75C3.41848 3.125 3.10054 3.2567 2.86612 3.49112C2.6317 3.72554 2.5 4.04348 2.5 4.375V8.75C2.5 12.8687 4.49375 15.3648 6.16641 16.7336C7.96797 18.207 9.76016 18.707 9.83828 18.7281C9.9457 18.7573 10.059 18.7573 10.1664 18.7281C10.2445 18.707 12.0344 18.207 13.8383 16.7336C15.5063 15.3648 17.5 12.8687 17.5 8.75V4.375C17.5 4.04348 17.3683 3.72554 17.1339 3.49112C16.8995 3.2567 16.5815 3.125 16.25 3.125ZM16.25 8.75C16.25 11.6461 15.1828 13.9969 13.0781 15.7359C12.1619 16.4904 11.12 17.0775 10 17.4703C8.89469 17.0843 7.86558 16.5077 6.95938 15.7664C4.82969 14.0242 3.75 11.6641 3.75 8.75V4.375H16.25V8.75ZM6.43281 11.0672C6.31554 10.9499 6.24965 10.7909 6.24965 10.625C6.24965 10.4591 6.31554 10.3001 6.43281 10.1828C6.55009 10.0655 6.70915 9.99965 6.875 9.99965C7.04085 9.99965 7.19991 10.0655 7.31719 10.1828L8.75 11.6164L12.6828 7.68281C12.7409 7.62474 12.8098 7.57868 12.8857 7.54725C12.9616 7.51583 13.0429 7.49965 13.125 7.49965C13.2071 7.49965 13.2884 7.51583 13.3643 7.54725C13.4402 7.57868 13.5091 7.62474 13.5672 7.68281C13.6253 7.74088 13.6713 7.80982 13.7027 7.88569C13.7342 7.96156 13.7503 8.04288 13.7503 8.125C13.7503 8.20712 13.7342 8.28844 13.7027 8.36431C13.6713 8.44018 13.6253 8.50912 13.5672 8.56719L9.19219 12.9422C9.13414 13.0003 9.06521 13.0464 8.98934 13.0779C8.91346 13.1093 8.83213 13.1255 8.75 13.1255C8.66787 13.1255 8.58654 13.1093 8.51066 13.0779C8.43479 13.0464 8.36586 13.0003 8.30781 12.9422L6.43281 11.0672Z" fill="#0FA9C1"/>
                </svg>
                <span>Lifetime Warranty</span>
              </div>
              <div class="product-warranty-item">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M16.25 3.125H3.75C3.41848 3.125 3.10054 3.2567 2.86612 3.49112C2.6317 3.72554 2.5 4.04348 2.5 4.375V8.75C2.5 12.8687 4.49375 15.3648 6.16641 16.7336C7.96797 18.207 9.76016 18.707 9.83828 18.7281C9.9457 18.7573 10.059 18.7573 10.1664 18.7281C10.2445 18.707 12.0344 18.207 13.8383 16.7336C15.5063 15.3648 17.5 12.8687 17.5 8.75V4.375C17.5 4.04348 17.3683 3.72554 17.1339 3.49112C16.8995 3.2567 16.5815 3.125 16.25 3.125ZM16.25 8.75C16.25 11.6461 15.1828 13.9969 13.0781 15.7359C12.1619 16.4904 11.12 17.0775 10 17.4703C8.89469 17.0843 7.86558 16.5077 6.95938 15.7664C4.82969 14.0242 3.75 11.6641 3.75 8.75V4.375H16.25V8.75ZM6.43281 11.0672C6.31554 10.9499 6.24965 10.7909 6.24965 10.625C6.24965 10.4591 6.31554 10.3001 6.43281 10.1828C6.55009 10.0655 6.70915 9.99965 6.875 9.99965C7.04085 9.99965 7.19991 10.0655 7.31719 10.1828L8.75 11.6164L12.6828 7.68281C12.7409 7.62474 12.8098 7.57868 12.8857 7.54725C12.9616 7.51583 13.0429 7.49965 13.125 7.49965C13.2071 7.49965 13.2884 7.51583 13.3643 7.54725C13.4402 7.57868 13.5091 7.62474 13.5672 7.68281C13.6253 7.74088 13.6713 7.80982 13.7027 7.88569C13.7342 7.96156 13.7503 8.04288 13.7503 8.125C13.7503 8.20712 13.7342 8.28844 13.7027 8.36431C13.6713 8.44018 13.6253 8.50912 13.5672 8.56719L9.19219 12.9422C9.13414 13.0003 9.06521 13.0464 8.98934 13.0779C8.91346 13.1093 8.83213 13.1255 8.75 13.1255C8.66787 13.1255 8.58654 13.1093 8.51066 13.0779C8.43479 13.0464 8.36586 13.0003 8.30781 12.9422L6.43281 11.0672Z" fill="#0FA9C1"/>
                </svg>
                <span>30 Day Returns</span>
              </div>
            </div>
          </div>
          
      </form>

      </div>
      <div class="product-details-wrapper">
        <div class="product-details-head">
          <div class="product-details-head-item product-head-active" data-index="0">
            <span class="product-details-head-title" >Details</span>
          </div>
          <div class="product-details-head-item" data-index="1">
            <span class="product-details-head-title">Key Features</span>
          </div>
          <div class="product-details-head-item" data-index="2">
            <span class="product-details-head-title">Shipping & Returns</span>
          </div>
        </div>
        <div class="product-details-body">
          {{ product.description }}
        </div>
      </div>
      <div class="product-single-tutorial">
        <div class="product-single-tutorial-title">
          <span class="txt-500 fs-32">5 Minâš¡ Quick Workout</span>
          <span class="txt-400 fs-14">Easy to Use Daily</span>
        </div>
        <div class="product-single-tutorial-video" style="background-image: url('{{ product.featured_image |  image_url: width: 480}}')">
          <a href="{{ product.metafields.custom.video_workout }}" target="_blank">
            <button class="btn-primary txt-400" >
              Watch Video
              <img class="icon-14" src="https://cdn.shopify.com/s/files/1/0728/2645/4272/files/arrow-green.png?v=1730332241" alt="">
            </button>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<script>

const tabHead = document.querySelectorAll('.product-details-head-item');
const tabCont = document.querySelector('.product-details-body');

document.addEventListener("DOMContentLoaded", function() {
  const incrementBtn = document.getElementById("increment-btn");
  const decrementBtn = document.getElementById("decrement-btn");
  const quantityInput = document.getElementById("quantity-input");
  const stockAmount = {{ product.variants.first.inventory_quantity }};
  const productPrice = {{ product.price | divided_by: 100 }};
  const subtotalDisplay = document.getElementById("subtotal");

  // Update subtotal
  function updateSubtotal() {
      const quantity = parseInt(quantityInput.value);
      const subtotal = (quantity * productPrice).toFixed(2);
      subtotalDisplay.textContent = `${subtotal}`;
  }

  // Increment quantity
  incrementBtn.addEventListener("click", function() {
    console.log('add')
      let quantity = parseInt(quantityInput.value);
      if (quantity < stockAmount) {
          quantity++;
          quantityInput.value = quantity;
          updateSubtotal();
      }
  });

  // Decrement quantity
  decrementBtn.addEventListener("click", function() {
    console.log('substract')
      let quantity = parseInt(quantityInput.value);
      if (quantity > 1) {
          quantity--;
          quantityInput.value = quantity;
          updateSubtotal();
      }
  });

  // Update subtotal on quantity input change
  quantityInput.addEventListener("input", updateSubtotal);

  for (const tab of tabHead) {
    tab.addEventListener('click', () => {
      tabHead.forEach((x) => {
        x.classList.remove('product-head-active');
      })
      tab.classList.add('product-head-active');
      console.log(tab.getAttribute('data-index'))

      if(tab.getAttribute('data-index') == 0) {
        tabCont.innerHTML = `{{ product.description }}`
      } else if(tab.getAttribute('data-index') == 1) {
        tabCont.innerHTML = `{{ product.metafields.custom.key_features | metafield_tag }}`
      } else if(tab.getAttribute('data-index') == 2) {
        tabCont.innerHTML = `{{ product.metafields.custom.shipping_returns | metafield_tag }}`
      } 
    })
  }
});



</script>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script src="{{ 'template-product.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "SEG-B",
  "blocks": [
    {
      "type": "@app",
      "name": "Customer Reviews",
      "settings": []
    }
  ],
  "settings": [
    
  ]
}
{% endschema %}